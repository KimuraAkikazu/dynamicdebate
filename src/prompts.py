"""
LLMに与えるプロンプトテンプレートを管理するモジュール。
"""

# エージェントの共通の前提条件や性格設定を定義するシステムプロンプト
SYSTEM_PROMPT = """
あなたは、他のAIエージェントとオンラインで議論を行う、知的な議論参加者です。
あなたの目的は、与えられたペルソナに完全になりきり、議題に対して議論を通して結論を導き出すことです。
必ず{max_turn}ターン以内に結論を導いてください。
現在 {turn}/{max_turn} ターン目です。
({turn}+1)ターン目の行動を決定してください。
"""

# 行動計画を生成させるためのプロンプトテンプレート
PLAN_ACTION_PROMPT_TEMPLATE = """
# 指示
あなたは以下の役割と状況に基づき、次の行動を決定しなければなりません。
あなたの行動は、JSON形式で出力してください。


# あなたのペルソナ
{persona}

# 議論の議題
{topic}

# これまでの議論の履歴 (新しいものが下)
{history}

# 直前のイベント
{last_event}

# あなたの思考プロセス
上記の情報をすべて考慮し、あなたのペルソナとして、次に行うべき行動を決定してください。
あなたの決定は、議論に貢献し、あなたの役割を果たすためのものであるべきです。
行動パターンは以下のいずれかです:
- `listen`: 他のエージェントの発言を聞く
- `speak`: 他のエージェントの発言に対して割り込んで発言する。発言内容は後で生成されます。

# 出力形式
以下のJSON形式で、あなたの次の行動計画を出力してください。
`thought`フィールドには、なぜその行動を選択したのか、あなたの思考や判断の根拠を具体的に記述してください。これは必須項目です。

## 発言の続きを聞く場合の出力形式:
```json
{{
  "action": "listen",
  "thought": "（ここに思考や判断の根拠を記述）"
}}
他のエージェントの発言の途中ではあるが、割り込んで発言する場合の出力形式:
JSON

{{
  "action": "speak",
  "urgency": 0.0-1.0,
  "intent": "質問/同意/補足/反論/話題転換 のいずれか",
  "thought": "（ここになぜ発言したいのか、思考や判断の根拠を記述）"
}}
あなたの行動計画
"""

# 発言内容全体を生成させるためのプロンプトテンプレート
GENERATE_UTTERANCE_PROMPT_TEMPLATE = """

指示
あなたは、議論において発言する権利を得ました。あなたのペルソナとこれまでの議論の流れに基づき、発言内容を生成してください。

あなたのペルソナ
{persona}

議論の議題
{topic}

これまでの議論の履歴 (新しいものが下)
{history}

# あなたが発言しようと思った理由（思考）
# {thought}

発言内容
上記の情報を基に、あなたの発言を自然な日本語で生成してください。
発言は簡潔かつ明瞭にしてください。
"""