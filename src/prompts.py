"""
LLMに与えるプロンプトテンプレートを管理するモジュール。
"""

# -------------------------------------------------- #
# 共通システムプロンプト
# -------------------------------------------------- #
SYSTEM_PROMPT = """
あなたは、他のAIエージェントとオンラインで議論を行う、知的な議論参加者です。
あなたの目的は、与えられたペルソナに完全になりきり、議題に対して議論を通して結論を導き出すことです。
最大 {max_turn}ターンの議論で現在{turn}ターン目です。（残り {turns_left} ターン）
残りターンが少ない場合は結論やまとめを優先してください。
"""

# -------------------------------------------------- #
# 行動計画用プロンプト（通常ターン）
# -------------------------------------------------- #
PLAN_ACTION_PROMPT_TEMPLATE = """
# 指示
次のターンでのあなたの行動計画をJSON形式で出力してください。
行動パターンは以下のいずれかです:
- `listen`: 他のエージェントの発言を聞く
- `speak`: 自分のターンで発言する
- `interrupt`: 別のエージェントがまだ発言中に割り込む

# あなたのペルソナ
{persona}

# 議論の議題
{topic}

# これまでの議論の履歴 (新しいものが下)
{history}

# これまでのあなたの思考履歴 (新しいものが下)
{thought_history}

# このターンでの発言
{last_event}

# 出力形式
```json
{{
  "action": "listen|speak|interrupt",
  "urgency": 0.0-1.0,
  "intent": "質問/同意/補足/反論/話題転換",
  "thought": "（actionを選択した理由と、あなたが今思っていること）"
}}
# 注意
- このターンの発言内容のみを考慮してください。無理に先の発言を予測して行動計画を立てる必要はありません。
"""

#--------------------------------------------------
# 行動計画用プロンプト（沈黙ターン）
# --------------------------------------------------
SILENCE_PLAN_PROMPT_TEMPLATE = """

# 状況
現在のターンは誰も発言しませんでした（沈黙）。
残り {turns_left} ターンで必ず議論の結論を導く必要があります。

# あなたのペルソナ
{persona}

# 議論の議題
{topic}

# これまでの議論の履歴 (新しいものが下)
{history}

# 出力要件
沈黙を打破し議論を進めるための行動を JSON で返してください。
# 行動パターンは以下のいずれかです:
# 出力形式
```json
{{
  "action": "listen|speak|interrupt",
  "urgency": 0.0-1.0,
  "intent": "質問/同意/補足/反論/話題転換 など",
  "thought": "（actionを選択した理由とあなたが今思っていること）"
}}
"""


# --------------------------------------------------
# 発話生成用プロンプト
# --------------------------------------------------
GENERATE_UTTERANCE_PROMPT_TEMPLATE = """

# 指示
あなたは、議論において発言する権利を得ました。あなたのペルソナと議論の流れを踏まえて発言を生成してください。
残り {turns_left} ターンで結論が必要です。発言は簡潔かつ明瞭に。

# あなたのペルソナ
{persona}

# 議論の議題
{topic}

# これまでの議論の履歴 (新しいものが下)
{history}

# あなたが発言しようと思った理由（思考）
{thought}

# 発言内容
上記の情報を基に、あなたの発言を自然な日本語で生成してください。
発言は簡潔かつ明瞭にしてください。
発言時は前置きを省略し、主張や意見を直接述べてください。
"""